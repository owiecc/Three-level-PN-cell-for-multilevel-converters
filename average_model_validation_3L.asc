Version 4
SHEET 1 4356 1844
WIRE 2272 -1392 2208 -1392
WIRE 2576 -1392 2528 -1392
WIRE 1744 -1376 1712 -1376
WIRE 1776 -1376 1744 -1376
WIRE 1920 -1376 1888 -1376
WIRE 2208 -1376 2208 -1392
WIRE 1920 -1344 1888 -1344
WIRE 1920 -1312 1888 -1312
WIRE 2208 -1280 2208 -1296
WIRE 2272 -1280 2208 -1280
WIRE 2640 -1280 2528 -1280
WIRE 2720 -1280 2640 -1280
WIRE 2848 -1280 2800 -1280
WIRE 2208 -1248 2208 -1280
WIRE 2352 -1216 2352 -1248
WIRE 2400 -1216 2400 -1248
WIRE 2448 -1216 2448 -1248
WIRE 1776 -1088 1744 -1088
WIRE 1920 -1088 1888 -1088
WIRE 2272 -1072 2224 -1072
WIRE 2576 -1072 2528 -1072
WIRE 1920 -1056 1888 -1056
WIRE 2224 -1056 2224 -1072
WIRE 1920 -1024 1888 -1024
WIRE 2224 -960 2224 -976
WIRE 2272 -960 2224 -960
WIRE 2640 -960 2528 -960
WIRE 2720 -960 2640 -960
WIRE 2848 -960 2800 -960
WIRE 2224 -928 2224 -960
WIRE 2352 -896 2352 -928
WIRE 2400 -896 2400 -928
WIRE 2448 -896 2448 -928
FLAG 2352 -1216 DPA
FLAG 2400 -1216 D0A
FLAG 2448 -1216 DNA
FLAG 2208 -1248 0
FLAG 1920 -1376 DPA
FLAG 1920 -1344 D0A
FLAG 1920 -1312 DNA
FLAG 1712 -1216 0
FLAG 1744 -1376 DA
FLAG 1920 -1088 SPA
FLAG 1920 -1056 S0A
FLAG 1920 -1024 SNA
FLAG 1744 -1088 DA
FLAG 2848 -960 0
FLAG 2640 -960 OUT
FLAG 2352 -896 SPA
FLAG 2400 -896 S0A
FLAG 2448 -896 SNA
FLAG 2224 -928 0
FLAG 2848 -1280 0
FLAG 2640 -1280 OUTavg
SYMBOL bv 2208 -1392 M0
SYMATTR InstName Vgavg
SYMATTR Value V={Vdc}
SYMBOL PN_average_model 2400 -1344 R0
SYMATTR InstName XA1
SYMATTR SpiceLine C={C} RP={RP} R0H={R0H} R0L={R0L} RN={RN}
SYMBOL voltage 1712 -1392 M0
WINDOW 0 24 16 Invisible 2
WINDOW 3 39 54 Left 2
SYMATTR InstName V1
SYMATTR Value SINE(0 {ma} {f1} 0 0 180)
SYMBOL voltage 1712 -1312 M0
WINDOW 0 24 16 Invisible 2
WINDOW 3 39 53 Left 2
SYMATTR InstName V7
SYMATTR Value SINE(0 {0*ma/6} {3*f1} 0 0 180)
SYMBOL PN_average_modulator 1824 -1344 R0
WINDOW 0 8 -56 Invisible 2
SYMATTR InstName X2
SYMBOL current 2720 -960 M90
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 52 -137 VRight 2
WINDOW 0 -54 13 VRight 2
SYMATTR Value SINE(0 {16*sqrt(2)} 50 0 0 170)
SYMATTR InstName ILoad
SYMBOL PN_switching_model 2400 -1024 R0
SYMATTR InstName XB1
SYMATTR SpiceLine C=100u Rswitch=Rsw
SYMBOL bv 2224 -1072 M0
SYMATTR InstName Vg
SYMATTR Value V={Vdc}
SYMBOL current 2720 -1280 M90
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 52 -137 VRight 2
WINDOW 0 -53 -4 VRight 2
SYMATTR Value SINE(0 {16*sqrt(2)} 50 0 0 170)
SYMATTR InstName ILoadavg
SYMBOL PN_modulator 1824 -1056 R0
WINDOW 0 8 -56 Invisible 2
SYMATTR InstName X1
TEXT 3128 -1352 Left 2 !.param Ts=50us
TEXT 3128 -1448 Left 2 !.tran 0 80m 40m
TEXT 3128 -1376 Left 2 !.param Vdc=400
TEXT 3128 -1136 Left 2 !.param ma=0.62*k f1=50 k=2/sqrt(3)
TEXT 3128 -1280 Left 2 !.param Rsw=100m
TEXT 3128 -1256 Left 2 !.param RP=2*Rsw
TEXT 3128 -1184 Left 2 !.param RN=2*Rsw
TEXT 3128 -1232 Left 2 !.param R0H=2*Rsw
TEXT 3128 -1208 Left 2 !.param R0L=Rsw
TEXT 3128 -1328 Left 2 !.param C=100u
TEXT 3128 -1424 Left 2 !.options reltol=1e-9
